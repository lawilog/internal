1;
pkg load optim;

x=[0 0 0; 4 0 0; 4 3 0];

x = [
0 0 0
1 0 0
2 0 0
0 1 0
1 1 0
2 1 0

0 0 1
1 0 1
2 0 1
0 1 1
1 1 1
2 1 1
];

x = [
0 0 0
0 1 0
0 2 0
0 3 0
0 4 0
1 0 0
1 1 0
1 2 0
1 3 0
1 4 0
2 0 0
2 1 0
2 3 0
2 4 0
3 0 0
3 1 0
3 3 0
3 4 0
4 0 0
4 1 0
4 2 0
4 3 0
4 4 0
5 0 0
5 1 0
5 2 0
5 3 0
5 4 0

0 0 0.5
0 1 0.5
0 2 0.5
0 3 0.5
0 4 0.5
1 0 0.5
1 1 0.5
1 2 0.5
1 3 0.5
1 4 0.5
2 0 0.5
2 1 0.5
2 3 0.5
2 4 0.5
3 0 0.5
3 1 0.5
3 3 0.5
3 4 0.5
4 0 0.5
4 1 0.5
4 2 0.5
4 3 0.5
4 4 0.5
5 0 0.5
5 1 0.5
5 2 0.5
5 3 0.5
5 4 0.5
];

[n,three] = size(x);

% shuffle
for k=1:n
	a = randi([k,n]);
	t = x(a,:);
	x(a,:) = x(k,:);
	x(k,:) = t;
end

% precompute real distances
D = zeros(n, n);
for i=1:n
	for j=(i+1):n
		D(i,j) = norm(x(i,:) - x(j,:));
		D(j,i) = D(i,j);
	end
end

r = dist_to_map(D);

% plot
plot(r(:,1), r(:,2), 'o');
% plot(r(1:6,1), r(1:6,2), 'ro',  r(7:12,1), r(7:12,2), 'bx');
